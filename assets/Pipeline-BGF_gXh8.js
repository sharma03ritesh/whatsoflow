import{r as t,j as e,H as N}from"./app-BizxXqg7.js";import{A as g}from"./app-sidebar-layout-CaMs9F-P.js";import{a as x,b as v,p as b}from"./PipelineColumn-CTmgtk6J.js";import{c as y,B as u}from"./button-BQ_HaO7-.js";import{L as C}from"./loader-circle-qK_5H3YY.js";import{P as h}from"./plus-BCTyXobj.js";import"./loading-spinner-BXfFPKXA.js";import"./index-DZiRmdSI.js";import"./index-3YIUB5mP.js";import"./index-BH0NSEIh.js";import"./app-logo-zSvHLsSz.js";import"./app-logo-icon-B8K9u0gq.js";import"./dialog-CtonFf9y.js";import"./input-V6jPku_u.js";import"./label-D43lO-9X.js";import"./save-CU-1-yFF.js";import"./card-DySrz6MO.js";import"./react-redux-6AeXlaNM.js";import"./with-selector-BTF6SnSV.js";import"./badge-DJri7UZe.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],p=y("CircleX",S);class w extends t.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){console.error("Component Error:",s,a)}render(){return this.state.hasError?this.props.fallback||e.jsx("div",{className:"p-4 bg-red-50 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(p,{className:"h-5 w-5 text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Something went wrong"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:this.state.error?.message||"An unexpected error occurred"})}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",onClick:()=>window.location.reload(),children:"Refresh page"})})]})]})}):this.props.children}}function E(){const[i,s]=t.useState([]),[a,l]=t.useState(!0),[o,c]=t.useState(null),[f,d]=t.useState(!1),n=async()=>{try{l(!0),c(null);const r=await b.getColumns();s(r),r.length===0&&d(!0)}catch(r){c("Failed to load pipeline data"),console.error(r)}finally{l(!1)}};t.useEffect(()=>{n()},[]);const m=()=>{n(),d(!1)};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(C,{className:"h-12 w-12 animate-spin text-blue-500"})}):o?e.jsx("div",{className:"p-4 bg-red-50 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(p,{className:"h-5 w-5 text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading pipeline"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:o})}),e.jsx("div",{className:"mt-4",children:e.jsx(u,{variant:"outline",onClick:n,className:"text-red-700 bg-red-100 hover:bg-red-200",children:"Try again"})})]})]})}):f||i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 rounded-lg border-2 border-dashed border-gray-300 p-6 text-center",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-blue-100",children:e.jsx(h,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No pipeline columns yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first column to organize your leads."}),e.jsx("div",{className:"mt-6",children:e.jsx(x,{onSave:m,children:e.jsxs(u,{children:[e.jsx(h,{className:"-ml-1 mr-2 h-5 w-5"}),"Add Column"]})})})]}):e.jsx(w,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Sales Pipeline"}),e.jsx(x,{onSave:m})]}),e.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4",children:i.map(r=>e.jsx(v,{column:r,onLeadClick:j=>{console.log("Lead clicked:",j)}},r.id))})]})})}const O=()=>e.jsxs(g,{children:[e.jsx(N,{title:"Sales Pipeline"}),e.jsx("div",{className:"container mx-auto py-6 px-4",children:e.jsx(E,{})})]});export{O as default};
